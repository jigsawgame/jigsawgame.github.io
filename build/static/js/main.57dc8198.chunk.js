(this["webpackJsonpjs-games"]=this["webpackJsonpjs-games"]||[]).push([[0],{59:function(e,t,n){},60:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(9),r=n.n(i),o=(n(59),n(23)),s=n(8),l=n(17),u=(n(60),{events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}},emit:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}}),d=n(2),h=function(e){var t=e.style,n=e.index,a=e.className,c=e.gameStarted,i=e.updateRotation;return Object(d.jsx)("div",{onClick:function(){if(c){var e=t.rotation;i(n,(e+=1)%4)}},style:Object(l.a)(Object(l.a)({},t),{},{transform:"rotate(".concat(90*t.rotation,"deg)")}),"data-index":n,className:a,onDragStart:function(e){return function(e){e.dataTransfer.setData("id","card"),c&&u.emit("dragInProgress",e)}(e)},draggable:!0,children:Object(d.jsx)("div",{className:"overlay"})},n)},j=function(e,t,n){var a=e.rows,c=e.columns,i=Array(a*c).fill(0,0,a*c).map((function(e,t){return t})).reduce((function(e,t){var n,i;return e[t]=[[(n=Math.floor(t/c))-1,(i=t%c)-1],[n-1,i],[n-1,i+1],[n,i-1],[n,i+1],[n+1,i-1],[n+1,i],[n+1,i+1]].filter((function(e){return e[0]>=0&&e[1]>=0&&e[0]<=a-1&&e[1]<=c-1})).map((function(e){return e[0]*c+e[1]})),e}),{})[t];return i&&i.includes(n)},b=function(e){var t=e.imageData,n=e.index,a=e.dropHandler,i=e.style,r=e.children,o=c.a.useState(!1),h=Object(s.a)(o,2),b=h[0],m=h[1],g=c.a.useState(-1),f=Object(s.a)(g,2),x=f[0],p=f[1];c.a.useEffect((function(){u.on("dragInProgress",(function(e){p(e.target.dataset.index),j(t,e.target.dataset.index,n)&&m(!0)})),u.on("dropFinish",(function(e){p(-1),m(!1)}))}),[]);var O=b?"1px solid green":"1px solid gray",v=x==n?"current-drag":"";return b&&(v="highlight ".concat(v)),Object(d.jsx)("div",{style:Object(l.a)(Object(l.a)({},i),{},{border:O}),className:v,onDragOver:function(e){return function(e){e.preventDefault()}(e)},onDrop:function(e){return c=e,u.emit("dropFinish",c),p(-1),m(!1),void(j(t,x,n)&&a(x,n));var c},onDragEnd:function(e){return function(e){e.preventDefault(),m(!1)}(e)},onDragLeave:function(e){return function(e){e.preventDefault(),m(!1),j(t,e.target.dataset.index,n)&&m(!1)}(e)},children:r})};function m(e){return e>9?e.toString():"0"+e}var g=0,f=function(){var e=c.a.useState("00"),t=Object(s.a)(e,2),n=t[0],a=t[1],i=c.a.useState("00"),r=Object(s.a)(i,2),o=r[0],l=r[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("reset, ",e,g),g&&(window.clearInterval(g),e&&(a("00"),l("00")))};return c.a.useEffect((function(){u.on("gameStarted",(function(){!function(){var e=0;g=window.setInterval((function(){a(m(++e%60)),l(m(Math.floor(e/60)))}),1e3)}()})),u.on("gameWon",(function(){h()})),u.on("gameResetted",(function(){h(!0)}))}),[]),Object(d.jsxs)("div",{style:{display:"inline-block",background:"white",border:"1px solid gray",borderRadius:"5px",padding:"2px",marginRight:"10px",top:"2px",minWidth:"50px",position:"relative"},children:[Object(d.jsxs)("span",{children:[o,":"]}),Object(d.jsx)("span",{children:n})]})};var x=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{checked:e.isOn,onChange:e.handleToggle,className:"switch-checkbox",type:"checkbox",id:"switch-button"}),Object(d.jsx)("label",{style:{background:e.isOn&&e.color},className:"switch-label",htmlFor:"switch-button",children:Object(d.jsx)("span",{className:"switch-button"})})]})},p=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(d.jsx)(x,{isOn:c,color:"green",handleToggle:function(){i(!c),e.onChange(!c)}})},O=n(102),v=n(109),y=n(114),w=n(112),S=n(111),k=n(110),N=n(113),C=n(106),M=n(107),W=n(108),D=n(42),E=n(49),R=n.n(E),q=n(104),I=Object(O.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),L=c.a.forwardRef((function(e,t){return Object(d.jsx)(q.a,Object(l.a)({direction:"up",ref:t},e))})),A=function(e){var t,n=window.innerWidth<=400;switch(e){case"animal":t="https://raw.githubusercontent.com/tukuna30/images/master/camels".concat(n?"_mobile":"",".png");break;case"scenic":t="https://raw.githubusercontent.com/tukuna30/images/master/animal".concat(n?"_mobile":"",".png");break;case"nature":t="https://raw.githubusercontent.com/tukuna30/images/master/scenic".concat(n?"_mobile":"",".png");break;case"greenery":t="https://raw.githubusercontent.com/tukuna30/images/master/garden".concat(n?"_mobile":"",".png")}return t},B=function(){var e=I(),t=c.a.useState(!1),n=Object(s.a)(t,2),a=n[0],i=n[1],r=c.a.useState("nature"),j=Object(s.a)(r,2),m=j[0],g=j[1],x=c.a.useState(!1),O=Object(s.a)(x,2),E=O[0],q=O[1],B=c.a.useState(!1),P=Object(s.a)(B,2),T=P[0],F=P[1],z=c.a.useState(1),H=Object(s.a)(z,2),_=H[0],G=H[1],J=c.a.useState(!0),U=Object(s.a)(J,2),Y=U[0],Z=(U[1],c.a.useState([])),$=Object(s.a)(Z,2),K=$[0],Q=$[1],V=c.a.useState([]),X=Object(s.a)(V,2),ee=X[0],te=X[1],ne=c.a.useState(!1),ae=Object(s.a)(ne,2),ce=ae[0],ie=ae[1],re=c.a.useState([]),oe=Object(s.a)(re,2),se=oe[0],le=oe[1],ue=c.a.useState({width:0,height:0,squareSide:1,rows:1,columns:1}),de=Object(s.a)(ue,2),he=de[0],je=de[1],be=c.a.useState(A("nature")),me=Object(s.a)(be,2),ge=me[0],fe=me[1],xe=c.a.useState(0),pe=Object(s.a)(xe,2),Oe=pe[0],ve=pe[1],ye=c.a.useState(!0),we=Object(s.a)(ye,2),Se=we[0],ke=we[1];c.a.useEffect((function(){De(ge)}),[]);var Ne=function(){Ce(!1)},Ce=function(e){ke(e)},Me=function(e,t){if(se.length&&T){console.log("suffledpos",se);var n=Object(o.a)(se),a=n[e];n[e]=n[t],n[t]=a;var c=Ie(n);le(n),F(!c.gameWon),q(c.gameWon),ve(c.correctMoves),console.log(c,"status"),c.gameWon&&u.emit("gameWon",{})}},We=function(e,t){if(Y){var n=Object(o.a)(se);n[e].rotation=t;var a=Ie(n);le(n),F(!a.gameWon),q(a.gameWon),ve(a.correctMoves),a.gameWon&&u.emit("gameWon",{})}},De=function(e){var t=document.getElementById("loader-container");t&&t.classList.remove("hide");var n=new Image;n.src=e,n.onload=function(e){var a=Ee(n.width,n.height),c=a.positions;je({width:n.width,height:n.height,rows:a.rows,columns:a.columns,squareSide:a.squareSide}),Q(c),ie(!1);var i=document.getElementById("hidden-image-container");i&&document.body.removeChild(i),t&&t.classList.add("hide")},n.onerror=function(){ie(!0),t&&t.classList.add("hide")};var a=document.createElement("div");a.setAttribute("id","hidden-image-container"),a.setAttribute("style","display: none");var c=document.getElementById("hidden-image-container");c&&document.body.removeChild(c),a.append(n),document.body.prepend(a)},Ee=function(e,t){var n=[],a=e*t/Math.pow(7,2),c=Math.floor(Math.sqrt(a)),i=Math.floor(e/c),r=Math.floor(t/c);return i-=1,r-=1,Array(r).fill(0,0,r).map((function(e,t){return t})).forEach((function(e){return Array(i).fill(0,0,i).map((function(e,t){return t})).forEach((function(t){n.push({x:-(t+1)*c,y:-(e+1)*c,index:r*e+t,squareSide:c})}))})),{positions:n,rows:r,columns:i,squareSide:c}},Re=function(e){var t=e||K;Y&&(t=t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{rotation:Math.floor(4*Math.random())})})),te(t));var n=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(t.slice());le(n)},qe=function(){T||(Re(Object(o.a)(K)),F(!0),q(!1),u.emit("gameStarted",null))},Ie=function(e){var t=0,n=!0;return se.length?(console.log("rotated",ee),(ee||K).forEach((function(a,c){a.x===e[c].x&&a.y===e[c].y&&0===e[c].rotation?t+=1:n=!1})),{gameWon:n,correctMoves:t}):{gameWon:!1,correctMoves:t}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"+",t="+"===e?10:-10;"-"===e&&_<.5||"+"===e&&_>1.5||G(_*(100+t)/100)};if(ce)return Object(d.jsx)("div",{children:"Failed to load image!"});if(!he.width)return null;var Ae=he.squareSide*he.columns+2*he.columns,Be=he.squareSide*he.rows+2*he.rows,Pe=[];Pe=se.length?se:ee&&ee.length?Object(o.a)(ee):Object(o.a)(K),T||(Pe=Object(o.a)(K));var Te=[],Fe=[];return Pe.forEach((function(e,t){Te.push(e),t%he.columns===he.columns-1&&(Fe.push(Te),Te=[])})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("div",{className:se.length?"started":"",style:{background:"lightsalmon"},children:[Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"wave",children:[Object(d.jsx)("div",{}),Object(d.jsxs)("div",{className:"button-container",children:[Object(d.jsxs)("select",{placeholder:"Pick image:",style:{borderRadius:"5px",marginRight:"10px",height:"24px"},value:m,onChange:function(e){if(!T){var t=e.target.value,n=A(t);De(n),g(e.target.value),fe(n)}},children:[Object(d.jsx)("option",{value:"",disabled:!0,children:"Pick image"}),Object(d.jsx)("option",{value:"scenic",children:"Scenic"}),Object(d.jsx)("option",{value:"animal",children:"Animal"}),Object(d.jsx)("option",{value:"nature",children:"Nature"}),Object(d.jsx)("option",{selected:!0,value:"greenery",children:"Greenery"})]}),Object(d.jsx)("button",{onClick:qe,children:"Start Game"}),Object(d.jsx)("button",{style:{marginBottom:"10px"},onClick:function(){u.emit("gameResetted",null),Q(Object(o.a)(K)),F(!1),q(!1),G(1)},children:"Reset Game"}),Object(d.jsx)(f,{}),Object(d.jsxs)("div",{className:"zoom-buttons",children:[Object(d.jsx)("button",{onClick:function(){return Le("-")},children:"-"}),Object(d.jsx)("span",{style:{color:"black",marginRight:"4px",marginLeft:"3px"},children:"Zoom"}),Object(d.jsx)("button",{onClick:function(){return Le()},children:"+"})]}),Object(d.jsx)("span",{style:{marginRight:"10px",color:"white"},children:"Rules"}),Object(d.jsx)(p,{style:{marginLeft:"5px"},onChange:function(){i(!a)}}),E&&Object(d.jsxs)("div",{style:{color:"white",marginLeft:"10px"},children:[Object(d.jsx)("span",{children:"Congratulations!!! You've won."}),Object(d.jsx)("button",{onClick:function(){qe()},children:"Play again"})]})]})]})}),Object(d.jsxs)("div",{className:"mid-section",style:{paddingLeft:"20px"},children:[Object(d.jsxs)("div",{style:{width:Ae,height:Be,margin:"20px 0",transform:"scale(".concat(_,")"),transformOrigin:"left top"},className:"image-container ".concat(100!==_?"zoom":""),children:[(T||E)&&Object(d.jsx)("div",{className:"progress",children:Object(d.jsx)("span",{style:{width:"".concat(Oe/K.length*100,"%")}})}),Fe.map((function(e,t){return Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{style:{display:"flex",flexWrap:"nowrap"},children:e.map((function(e,n){return function(e,t){var n=e.x,a=e.y,c=e.squareSide,i={background:'url("'.concat(ge,'") ').concat(n,"px ").concat(a,"px no-repeat"),width:"".concat(c,"px"),height:"".concat(c,"px"),rotation:e.rotation||0};return Object(d.jsx)(b,{imageData:he,index:t,dropHandler:Me,style:{width:i.width,height:i.height,border:"1px solid gray"},children:Object(d.jsx)(h,{updateRotation:We,gameStarted:T,style:i,index:t,className:"image"},t)},"c".concat(t))}(e,t*he.columns+n)}))})})}))]}),a&&Object(d.jsxs)("div",{className:"rules",children:[Object(d.jsx)("span",{style:{textDecoration:"underline"},children:"How to play"}),Object(d.jsxs)("ul",{style:{listStyle:"none"},children:[Object(d.jsx)("li",{children:"After starting the game, click on the cards to rotate and adjust properly."}),Object(d.jsx)("li",{children:"Drag a card and see allowed drop zones."}),Object(d.jsx)("li",{children:"Exchange positions by dropping the card."}),Object(d.jsx)("li",{children:"Check the progress bar!"}),Object(d.jsx)("li",{children:"Use zoom +/- feature to increase/reduce image sizes."})]})]})]}),Object(d.jsx)("div",{className:"container bottom",children:Object(d.jsx)("div",{className:"wave bottom",children:Object(d.jsxs)("div",{className:"button-container bottom",children:[Object(d.jsx)("span",{children:Object(d.jsx)("a",{style:{color:"white",textDecoration:"none"},href:"mailto:tukuna.patro@gmail.com?subject=Suggestions",children:"Have any suggestions?"})}),Object(d.jsx)("div",{children:Object(d.jsx)("span",{style:{color:"white"},children:"Jigsaw game by Tukuna Patro"})})]})})})]}),Object(d.jsxs)(y.a,{fullScreen:!0,open:Se,onClose:Ne,TransitionComponent:L,children:[Object(d.jsx)(C.a,{className:e.appBar,children:Object(d.jsxs)(M.a,{children:[Object(d.jsx)(W.a,{edge:"start",color:"inherit",onClick:Ne,"aria-label":"close",children:Object(d.jsx)(R.a,{})}),Object(d.jsx)(D.a,{variant:"h6",className:e.title,children:"Sound"}),Object(d.jsx)(v.a,{autoFocus:!0,color:"inherit",onClick:Ne,children:"save"})]})}),Object(d.jsxs)(k.a,{children:[Object(d.jsx)(S.a,{button:!0,children:Object(d.jsx)(w.a,{primary:"Phone ringtone",secondary:"Titania"})}),Object(d.jsx)(N.a,{}),Object(d.jsx)(S.a,{button:!0,children:Object(d.jsx)(w.a,{primary:"Default notification ringtone",secondary:"Tethys"})})]})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.57dc8198.chunk.js.map