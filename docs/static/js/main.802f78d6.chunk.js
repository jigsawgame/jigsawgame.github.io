(this["webpackJsonpjs-games"]=this["webpackJsonpjs-games"]||[]).push([[0],{59:function(e,t,n){},60:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(9),o=n.n(r),i=(n(59),n(23)),s=n(7),l=n(17),u=(n(60),{events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}},emit:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}}),d=n(2),h=function(e){var t=e.style,n=e.index,a=e.className,c=e.gameStarted,r=e.updateRotation;return Object(d.jsx)("div",{onClick:function(){if(c){var e=t.rotation;r(n,(e+=1)%4)}},style:Object(l.a)(Object(l.a)({},t),{},{transform:"rotate(".concat(90*t.rotation,"deg)")}),"data-index":n,className:a,onDragStart:function(e){return function(e){e.dataTransfer.setData("id","card"),c&&u.emit("dragInProgress",e)}(e)},draggable:!0,children:Object(d.jsx)("div",{className:"overlay"})},n)},j=function(e,t,n){var a=e.rows,c=e.columns,r=Array(a*c).fill(0,0,a*c).map((function(e,t){return t})).reduce((function(e,t){var n,r;return e[t]=[[(n=Math.floor(t/c))-1,(r=t%c)-1],[n-1,r],[n-1,r+1],[n,r-1],[n,r+1],[n+1,r-1],[n+1,r],[n+1,r+1]].filter((function(e){return e[0]>=0&&e[1]>=0&&e[0]<=a-1&&e[1]<=c-1})).map((function(e){return e[0]*c+e[1]})),e}),{})[t];return r&&r.includes(n)},b=function(e){var t=e.imageData,n=e.index,a=e.dropHandler,r=e.style,o=e.children,i=c.a.useState(!1),h=Object(s.a)(i,2),b=h[0],m=h[1],g=c.a.useState(-1),f=Object(s.a)(g,2),p=f[0],x=f[1];c.a.useEffect((function(){u.on("dragInProgress",(function(e){x(e.target.dataset.index),j(t,e.target.dataset.index,n)&&m(!0)})),u.on("dropFinish",(function(e){x(-1),m(!1)}))}),[]);var O=b?"1px solid green":"1px solid gray",v=p==n?"current-drag":"";return b&&(v="highlight ".concat(v)),Object(d.jsx)("div",{style:Object(l.a)(Object(l.a)({},r),{},{border:O}),className:v,onDragOver:function(e){return function(e){e.preventDefault()}(e)},onDrop:function(e){return c=e,u.emit("dropFinish",c),x(-1),m(!1),void(j(t,p,n)&&a(p,n));var c},onDragEnd:function(e){return function(e){e.preventDefault(),m(!1)}(e)},onDragLeave:function(e){return function(e){e.preventDefault(),m(!1),j(t,e.target.dataset.index,n)&&m(!1)}(e)},children:o})};function m(e){return e>9?e.toString():"0"+e}var g=0,f=function(){var e=c.a.useState("00"),t=Object(s.a)(e,2),n=t[0],a=t[1],r=c.a.useState("00"),o=Object(s.a)(r,2),i=o[0],l=o[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("reset, ",e,g),g&&(window.clearInterval(g),e&&(a("00"),l("00")))};return c.a.useEffect((function(){u.on("gameStarted",(function(){!function(){var e=0;g=window.setInterval((function(){a(m(++e%60)),l(m(Math.floor(e/60)))}),1e3)}()})),u.on("gameWon",(function(){h()})),u.on("gameResetted",(function(){h(!0)}))}),[]),Object(d.jsxs)("div",{style:{display:"inline-block",background:"white",border:"1px solid gray",borderRadius:"5px",padding:"2px",marginRight:"10px",top:"2px",minWidth:"50px",position:"relative"},children:[Object(d.jsxs)("span",{children:[i,":"]}),Object(d.jsx)("span",{children:n})]})};var p=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{checked:e.isOn,onChange:e.handleToggle,className:"switch-checkbox",type:"checkbox",id:"switch-button"}),Object(d.jsx)("label",{style:{background:e.isOn&&e.color},className:"switch-label",htmlFor:"switch-button",children:Object(d.jsx)("span",{className:"switch-button"})})]})},x=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(d.jsx)(p,{isOn:c,color:"green",handleToggle:function(){r(!c),e.onChange(!c)}})},O=n(101),v=n(107),y=n(112),w=n(110),S=n(109),k=n(108),N=n(111),C=n(105),W=n(106),M=n(42),E=n(47),D=n.n(E),R=n(103),q=Object(O.a)((function(e){return{appBar:{position:"relative",backgroundColor:"lightsalmon",color:"white"},title:{flex:1},button:{position:"absolute",right:"5px"}}})),I=c.a.forwardRef((function(e,t){return Object(d.jsx)(R.a,Object(l.a)({direction:"up",ref:t},e))})),L=function(e){var t,n=window.innerWidth<=400;switch(e){case"animal":t="https://raw.githubusercontent.com/tukuna30/images/master/camels".concat(n?"_mobile":"",".png");break;case"scenic":t="https://raw.githubusercontent.com/tukuna30/images/master/animal".concat(n?"_mobile":"",".png");break;case"nature":t="https://raw.githubusercontent.com/tukuna30/images/master/scenic".concat(n?"_mobile":"",".png");break;case"greenery":t="https://raw.githubusercontent.com/tukuna30/images/master/garden".concat(n?"_mobile":"",".png")}return t},A=function(){var e=q(),t=c.a.useState(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],o=c.a.useState("nature"),j=Object(s.a)(o,2),m=j[0],g=j[1],p=c.a.useState(!1),O=Object(s.a)(p,2),E=O[0],R=O[1],A=c.a.useState(!1),B=Object(s.a)(A,2),P=B[0],F=B[1],J=c.a.useState(1),T=Object(s.a)(J,2),z=T[0],H=T[1],G=c.a.useState(!0),_=Object(s.a)(G,2),U=_[0],Y=(_[1],c.a.useState([])),Z=Object(s.a)(Y,2),$=Z[0],K=Z[1],Q=c.a.useState([]),V=Object(s.a)(Q,2),X=V[0],ee=V[1],te=c.a.useState(!1),ne=Object(s.a)(te,2),ae=ne[0],ce=ne[1],re=c.a.useState([]),oe=Object(s.a)(re,2),ie=oe[0],se=oe[1],le=c.a.useState({width:0,height:0,squareSide:1,rows:1,columns:1}),ue=Object(s.a)(le,2),de=ue[0],he=ue[1],je=c.a.useState(L("nature")),be=Object(s.a)(je,2),me=be[0],ge=be[1],fe=c.a.useState(0),pe=Object(s.a)(fe,2),xe=pe[0],Oe=pe[1],ve=c.a.useState(!0),ye=Object(s.a)(ve,2),we=ye[0],Se=ye[1];c.a.useEffect((function(){Me(me)}),[]);var ke=function(){Ne(!1)},Ne=function(e){Se(e)},Ce=function(e,t){if(ie.length&&P){console.log("suffledpos",ie);var n=Object(i.a)(ie),a=n[e];n[e]=n[t],n[t]=a;var c=qe(n);se(n),F(!c.gameWon),R(c.gameWon),Oe(c.correctMoves),console.log(c,"status"),c.gameWon&&u.emit("gameWon",{})}},We=function(e,t){if(U){var n=Object(i.a)(ie);n[e].rotation=t;var a=qe(n);se(n),F(!a.gameWon),R(a.gameWon),Oe(a.correctMoves),a.gameWon&&u.emit("gameWon",{})}},Me=function(e){var t=document.getElementById("loader-container");t&&t.classList.remove("hide");var n=new Image;n.src=e,n.onload=function(e){var a=Ee(n.width,n.height),c=a.positions;he({width:n.width,height:n.height,rows:a.rows,columns:a.columns,squareSide:a.squareSide}),K(c),ce(!1);var r=document.getElementById("hidden-image-container");r&&document.body.removeChild(r),t&&t.classList.add("hide")},n.onerror=function(){ce(!0),t&&t.classList.add("hide")};var a=document.createElement("div");a.setAttribute("id","hidden-image-container"),a.setAttribute("style","display: none");var c=document.getElementById("hidden-image-container");c&&document.body.removeChild(c),a.append(n),document.body.prepend(a)},Ee=function(e,t){var n=[],a=e*t/Math.pow(7,2),c=Math.floor(Math.sqrt(a)),r=Math.floor(e/c),o=Math.floor(t/c);return r-=1,o-=1,Array(o).fill(0,0,o).map((function(e,t){return t})).forEach((function(e){return Array(r).fill(0,0,r).map((function(e,t){return t})).forEach((function(t){n.push({x:-(t+1)*c,y:-(e+1)*c,index:o*e+t,squareSide:c})}))})),{positions:n,rows:o,columns:r,squareSide:c}},De=function(e){var t=e||$;U&&(t=t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{rotation:Math.floor(4*Math.random())})})),ee(t));var n=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(t.slice());se(n)},Re=function(){P||(De(Object(i.a)($)),F(!0),R(!1),u.emit("gameStarted",null))},qe=function(e){var t=0,n=!0;return ie.length?(console.log("rotated",X),(X||$).forEach((function(a,c){a.x===e[c].x&&a.y===e[c].y&&0===e[c].rotation?t+=1:n=!1})),{gameWon:n,correctMoves:t}):{gameWon:!1,correctMoves:t}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"+",t="+"===e?10:-10;"-"===e&&z<.5||"+"===e&&z>1.5||H(z*(100+t)/100)};if(ae)return Object(d.jsx)("div",{children:"Failed to load image!"});if(!de.width)return null;var Le=de.squareSide*de.columns+2*de.columns,Ae=de.squareSide*de.rows+2*de.rows,Be=[];Be=ie.length?ie:X&&X.length?Object(i.a)(X):Object(i.a)($),P||(Be=Object(i.a)($));var Pe=[],Fe=[];return Be.forEach((function(e,t){Pe.push(e),t%de.columns===de.columns-1&&(Fe.push(Pe),Pe=[])})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("div",{className:ie.length?"started":"",style:{background:"lightsalmon"},children:[Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"wave",children:[Object(d.jsx)("div",{}),Object(d.jsxs)("div",{className:"button-container",children:[Object(d.jsxs)("select",{placeholder:"Pick image:",style:{borderRadius:"5px",marginRight:"10px",height:"24px"},value:m,onChange:function(e){if(!P){var t=e.target.value,n=L(t);Me(n),g(e.target.value),ge(n)}},children:[Object(d.jsx)("option",{value:"",disabled:!0,children:"Pick image"}),Object(d.jsx)("option",{value:"scenic",children:"Scenic"}),Object(d.jsx)("option",{value:"animal",children:"Animal"}),Object(d.jsx)("option",{value:"nature",children:"Nature"}),Object(d.jsx)("option",{selected:!0,value:"greenery",children:"Greenery"})]}),Object(d.jsx)("button",{onClick:Re,children:"Start Game"}),Object(d.jsx)("button",{style:{marginBottom:"10px"},onClick:function(){u.emit("gameResetted",null),K(Object(i.a)($)),F(!1),R(!1),H(1)},children:"Reset Game"}),Object(d.jsx)(f,{}),Object(d.jsxs)("div",{className:"zoom-buttons",children:[Object(d.jsx)("button",{onClick:function(){return Ie("-")},children:"-"}),Object(d.jsx)("span",{style:{color:"black",marginRight:"4px",marginLeft:"3px"},children:"Zoom"}),Object(d.jsx)("button",{onClick:function(){return Ie()},children:"+"})]}),Object(d.jsx)("span",{style:{marginRight:"10px",color:"white"},children:"Rules"}),Object(d.jsx)(x,{style:{marginLeft:"5px"},onChange:function(){r(!a)}}),E&&Object(d.jsxs)("div",{style:{color:"white",marginLeft:"10px"},children:[Object(d.jsx)("span",{children:"Congratulations!!! You've won."}),Object(d.jsx)("button",{onClick:function(){Re()},children:"Play again"})]})]})]})}),Object(d.jsxs)("div",{className:"mid-section",style:{paddingLeft:"20px"},children:[Object(d.jsxs)("div",{style:{width:Le,height:Ae,margin:"20px 0",transform:"scale(".concat(z,")"),transformOrigin:"left top"},className:"image-container ".concat(100!==z?"zoom":""),children:[(P||E)&&Object(d.jsx)("div",{className:"progress",children:Object(d.jsx)("span",{style:{width:"".concat(xe/$.length*100,"%")}})}),Fe.map((function(e,t){return Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{style:{display:"flex",flexWrap:"nowrap"},children:e.map((function(e,n){return function(e,t){var n=e.x,a=e.y,c=e.squareSide,r={background:'url("'.concat(me,'") ').concat(n,"px ").concat(a,"px no-repeat"),width:"".concat(c,"px"),height:"".concat(c,"px"),rotation:e.rotation||0};return Object(d.jsx)(b,{imageData:de,index:t,dropHandler:Ce,style:{width:r.width,height:r.height,border:"1px solid gray"},children:Object(d.jsx)(h,{updateRotation:We,gameStarted:P,style:r,index:t,className:"image"},t)},"c".concat(t))}(e,t*de.columns+n)}))})})}))]}),a&&Object(d.jsxs)("div",{className:"rules",children:[Object(d.jsx)("span",{style:{textDecoration:"underline"},children:"How to play"}),Object(d.jsxs)("ul",{style:{listStyle:"none"},children:[Object(d.jsx)("li",{children:"After starting the game, click on the cards to rotate and adjust properly."}),Object(d.jsx)("li",{children:"Drag a card and see allowed drop zones."}),Object(d.jsx)("li",{children:"Exchange positions by dropping the card."}),Object(d.jsx)("li",{children:"Check the progress bar!"}),Object(d.jsx)("li",{children:"Use zoom +/- feature to increase/reduce image sizes."})]})]})]}),Object(d.jsx)("div",{className:"container bottom",children:Object(d.jsx)("div",{className:"wave bottom",children:Object(d.jsxs)("div",{className:"button-container bottom",children:[Object(d.jsx)("span",{children:Object(d.jsx)("a",{style:{color:"white",textDecoration:"none"},href:"mailto:tukuna.patro@gmail.com?subject=Suggestions",children:"Have any suggestions?"})}),Object(d.jsx)("div",{children:Object(d.jsx)("span",{style:{color:"white"},children:"Jigsaw game by Tukuna Patro"})})]})})})]}),Object(d.jsxs)(y.a,{fullWidth:!0,open:we,onClose:ke,TransitionComponent:I,children:[Object(d.jsx)(C.a,{className:e.appBar,children:Object(d.jsxs)(W.a,{children:[Object(d.jsx)(M.a,{variant:"h6",className:e.title,children:"Welcome to JigsawGame"}),Object(d.jsx)(v.a,{autoFocus:!0,color:"inherit",className:e.button,onClick:ke,children:Object(d.jsx)(D.a,{})})]})}),Object(d.jsxs)(k.a,{children:[Object(d.jsx)(S.a,{button:!0,children:Object(d.jsx)(w.a,{primary:"Play and learn",secondary:"Computer programming"})}),Object(d.jsx)(N.a,{}),Object(d.jsx)(S.a,{button:!0,children:Object(d.jsx)(w.a,{primary:"JavaScript, HTML, CSS",secondary:"ReactJS"})})]})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(A,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.802f78d6.chunk.js.map